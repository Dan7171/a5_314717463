{
  "PlpMain": {
    "Project": "collect_toys",
    "Name": "pick",
    "Type": "PLP"
  },
  "PossibleParametersValue": [
    {
      "AssignmentCode": [
        "__possibleParameters.push_back(std::make_tuple(\"green\"));",
        "__possibleParameters.push_back(std::make_tuple(\"blue\"));",
        "__possibleParameters.push_back(std::make_tuple( \"black\"));",
        "__possibleParameters.push_back(std::make_tuple(\"red\"));"
      ]
    }
  ],
  "GlobalVariableModuleParameters": [
    {
      "Name": "colorParam",
      "Type": "string"
    }
  ],
  "Preconditions": {
    "GlobalVariablePreconditionAssignments": [
      {
        "AssignmentCode": [
          "__meetPrecondition = false;",
          "bool holding = false;",
          "int baby_loc = state.baby_loc_const;",
          "",
          "bool typeMatch = false;",
          "for(int i=0; i < state.tBallObjects.size(); i++)",
          "{",
          "    if(state.hand_loc_const == state.tBallObjects[i]->location)",
          "    { ",
          "        holding = true; break;",
          "    }",
          "    if(state.agentLoc == state.tBallObjects[i]->location && state.tBallObjects[i]->color == colorParam) typeMatch=true;",
          "}",
          "__meetPrecondition = !holding && typeMatch && state.agentLoc != baby_loc;"
        ]
      }
    ],
    "ViolatingPreconditionPenalty": 0
  },
  "DynamicModel": {
    "NextStateAssignments": [
      {
        "AssignmentCode": [
          "int fail_reward = -2;",
          "int success_reward = -1;",
          "bool successful_pick =  __meetPrecondition ;",
          "state__.pick_cnt++;",
          "if(successful_pick){",
          "    for(int i=0; i < state__.tBallObjects.size(); i++){",
          "        if(state.agentLoc == state.tBallObjects[i]->location)",
          "        {",
          "            state__.tBallObjects[i]->location = state.hand_loc_const; break;",
          "        }",
          "    }",
          "}",
          "__moduleResponse = successful_pick ? eSuccess : eFailed;",
          " __reward = successful_pick ? success_reward: fail_reward;"
        ]
      }
    ]
  }
}