{
  "PlpMain": {
    "Project": "collect_toys",
    "Name": "pick",
    "Type": "PLP"
  },
  "PossibleParametersValue": [
    {
      "AssignmentCode": [
        "__possibleParameters.push_back(std::make_tuple(\"blue\"));",
        "__possibleParameters.push_back(std::make_tuple(\"red\"));",
        "__possibleParameters.push_back(std::make_tuple(\"black\"));",
        "__possibleParameters.push_back(std::make_tuple(\"green\"));"
      ]
    }
  ],
  "GlobalVariableModuleParameters": [
    {
      "Name": "toyType",
      "Type": "string"
    }
  ],
  "Preconditions": {
    "GlobalVariablePreconditionAssignments": [
      {
        "AssignmentCode": [
          "__meetPrecondition = false;",
          "bool holding = false;",
          "int baby_loc = state.baby_loc_const;",
          "bool typeMatch = false;",
          "for(int i=0; i < state.tBallObjects.size(); i++)",
          "{",
          "    if(state.hand_loc_const == state.tBallObjects[i]->location)",
          "    { ",
          "        holding = true; break;",
          "    }",
          "    if(state.agentLoc == state.tBallObjects[i]->location && state.tBallObjects[i]->color == toyType) typeMatch=true;",
          "}",
          "__meetPrecondition = !holding && typeMatch && state.agentLoc != baby_loc;"
        ]
      }
    ],
    "ViolatingPreconditionPenalty": 0
  },
  "DynamicModel": {
    "NextStateAssignments": [
      {
        "AssignmentCode": [
          "",
          " cout << \"*Pick started.\" << endl",
          "         <<\"action cnt=\"",
          "         <<(state.action_cnt_dbg)",
          "         <<\"pick_cnt=\"",
          "         <<(state.pick_cnt)",
          "         <<\"nav_cnt=\"",
          "         <<(state.nav_cnt)",
          "         <<\"total rewards=\"",
          "         <<(state.episode_total_rewards_dbg)",
          "         << \"real location = \"",
          "         << (state.agentLoc) << \" / \"",
          "         << \"ball locations=\"",
          "         << (state.tBallObjects[0]->location)",
          "         << (state.tBallObjects[1]->location)",
          "         << (state.tBallObjects[2]->location)",
          "         << (state.tBallObjects[3]->location)",
          "         << endl;",
          " cout << \"Robot selected Picking:   \"",
          "        <<(toyType)",
          "         << endl; ",
          "         ",
          "//debug",
          "state__.action_cnt_dbg = state.action_cnt_dbg + 1;",
          "",
          " ",
          " ",
          " bool successful_pick =  __meetPrecondition ;",
          " state__.pick_cnt++;",
          " if(successful_pick)",
          " {",
          "    for(int i=0; i < state__.tBallObjects.size(); i++){",
          "        if(state.agentLoc == state.tBallObjects[i]->location)",
          "        {",
          "            state__.tBallObjects[i]->location = state.hand_loc_const; break;",
          "        }",
          "    }",
          "}",
          "__moduleResponse = successful_pick ? eSuccess : eFailed;",
          " __reward = successful_pick ? -1 : -2;",
          " state__.episode_total_rewards_dbg = state.episode_total_rewards_dbg + __reward;"
        ]
      }
    ]
  }
}