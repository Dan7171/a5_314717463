{
  "PlpMain": {
    "Project": "collect_toys",
    "Name": "place",
    "Type": "PLP"
  },
  "DynamicModel": {
    "NextStateAssignments": [
      {
        "AssignmentCode": [
          "",
          " cout << \"*Place started.\" << endl",
          "         <<\"action cnt=\"",
          "         <<(state.action_cnt_dbg)",
          "         <<\"pick_cnt=\"",
          "         <<(state.pick_cnt)",
          "         <<\"nav_cnt=\"",
          "         <<(state.nav_cnt)",
          "         <<\"total rewards=\"",
          "         <<(state.episode_total_rewards_dbg)",
          "         << \"real location = \"",
          "         << (state.agentLoc) << \" / \"",
          "         << \"ball locations=\"",
          "         << (state.tBallObjects[0]->location)",
          "         << (state.tBallObjects[1]->location)",
          "         << (state.tBallObjects[2]->location)",
          "         << (state.tBallObjects[3]->location)",
          "         << endl;",
          "//debug",
          "state__.action_cnt_dbg = state.action_cnt_dbg + 1;",
          "",
          "int fail_reward = -3;",
          "int success_reward = -1;",
          "int n_balls = state__.tBallObjects.size();",
          "int r = fail_reward; ",
          "bool placed_successfully = false;",
          "int hand_loc = state.hand_loc_const;",
          "int baby_loc = state.baby_loc_const;",
          "",
          "// first we check if robot is even found in placing spot. If not, it cannot place... ",
          "// if it does, we check if its holding any ball",
          "// if and only if both conditions apply, we place the relevant ball",
          "",
          "int cur_bot_loc = state.agentLoc;",
          "bool in_placing_spot = (cur_bot_loc == baby_loc);",
          "",
          "if(in_placing_spot){",
          "    for(int i=0; i < n_balls; i++){",
          "        int ith_ball_loc = state.tBallObjects[i]->location;",
          "        bool in_hand = ith_ball_loc == hand_loc;",
          "        if(in_hand){",
          "            // Place the ball (set ith ball location in next state to  (placed in baby's lap))",
          "            state__.tBallObjects[i]->location = baby_loc;",
          "            // placing is done",
          "            r=success_reward; // change reward to the winning reward",
          "            placed_successfully = true;",
          "            break;",
          "        }",
          "    }",
          "}",
          "__moduleResponse = placed_successfully? eSuccess : eFailed;",
          "__reward = r;",
          "state__.episode_total_rewards_dbg = state.episode_total_rewards_dbg + r;"
        ]
      }
    ]
  }
}